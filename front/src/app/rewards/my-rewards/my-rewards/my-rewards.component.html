
  <!-- NAVBAR Paneliste -->
  <nav style="background:white; box-shadow:0 4px 12px rgba(0,0,0,.1); position:sticky; top:0; z-index:1000;">
    <div class="container-modern" style="display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem;">
      <a style="text-decoration:none; cursor:pointer;" routerLink="/paneliste/home">
        <img src="assets/logo-evalia.png" alt="EVALIA" style="height:90px; width:auto;">
      </a>

      <ul style="display:flex; list-style:none; gap:2rem; margin:0; align-items:center;">
        <li style="position:relative;">
          <a routerLink="/paneliste/notifications" class="nav-link-modern" style="position:relative; display:inline-block;">
            <i class="bi bi-bell icon-md" style="font-size:1.5rem;"></i>
            <span style="position:absolute; top:-8px; right:-8px; background:linear-gradient(135deg,#FF6B6B 0%,#FF8E53 100%); color:white; border-radius:50%; width:20px; height:20px; display:flex; align-items:center; justify-content:center; font-size:.75rem; font-weight:700; box-shadow:0 2px 8px rgba(255,107,107,.4);">5</span>
          </a>
        </li>
        <li><a routerLink="/profile" class="nav-link-modern"><i class="bi bi-person icon-sm"></i> Mon profil</a></li>
        <li *ngIf="auth.isPaneliste">
          <a routerLink="/reclamations/new" class="nav-link-modern" routerLinkActive="active">
            <i class="bi bi-file-earmark-plus icon-sm"></i> Ajouter une réclamation
          </a>
        </li>
        <li><a routerLink="/reclamations" class="nav-link-modern"><i class="bi bi-clipboard-check icon-sm"></i> Mes Réclamations</a></li>
        <li *ngIf="auth.isAuthenticated() && auth.isPaneliste">
          <a routerLink="/me/rewards" class="nav-link-modern">
            <i class="bi bi-gift icon-sm"></i> Mes Récompenses
          </a>
        </li>
      </ul>

      <button class="btn-modern btn-danger-pastel" (click)="logout()">
        <i class="bi bi-box-arrow-right icon-sm"></i> Déconnexion
      </button>
    </div>
  </nav>


<!-- ========== CONTENU "MES RÉCOMPENSES" ========== -->
<div class="container-modern" style="padding-top:2rem; padding-bottom:3rem;">
  <div class="animate-fade-in" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
    <div>
      <h1 class="text-gradient" style="font-size:2.5rem; font-weight:800; margin-bottom:.5rem;">
        <i class="bi bi-gift icon-lg" style="margin-right:.5rem;"></i> Mes récompenses
      </h1>
      <p style="color:#757575; font-size:1.1rem;">Suivez vos gains et leur statut de versement</p>
    </div>
  </div>

  <hr class="divider-pastel"/>

  <!-- Totaux par type -->
  <div class="mb-3" *ngIf="totalKeys?.length">
    <span class="badge-pastel badge-green me-2" *ngFor="let k of totalKeys">
      {{ k }} :
      <ng-container [ngSwitch]="k">
        <span *ngSwitchCase="'Points'">{{ (totals[k] || 0) | number:'1.0-0' }} pts</span>
        <span *ngSwitchDefault>{{ (totals[k] || 0) | number:'1.2-2' }} TND</span>
      </ng-container>
    </span>
  </div>

  <!-- Liste -->
  <div *ngIf="items?.length; else empty" class="table-modern card-modern animate-scale-in">
    <table>
      <thead>
        <tr>
          <th style="width:170px;"><i class="bi bi-calendar3 icon-sm"></i> Date</th>
          <th><i class="bi bi-megaphone icon-sm"></i> Annonce</th>
          <th style="width:140px;"><i class="bi bi-tag icon-sm"></i> Type</th>
          <th style="width:150px;"><i class="bi bi-coin icon-sm"></i> Montant</th>
          <th style="width:150px; text-align:center;"><i class="bi bi-bag-check icon-sm"></i> Statut</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let it of items; let i = index" class="animate-fade-in" [style.animation-delay]="(i*50)+'ms'">
          <td>{{ it.createdAt | date:'short' }}</td>
          <td>{{ it.announcementName }}</td>
          <td>{{ it.rewardType }}</td>
          <td>
            <ng-container [ngSwitch]="it.rewardType">
              <span *ngSwitchCase="'Points'">{{ it.amount }} pts</span>
              <span *ngSwitchDefault>{{ it.amount | number:'1.2-2' }} TND</span>
            </ng-container>
          </td>
          <td style="text-align:center;">
            <span class="badge"
                  [class.bg-secondary]="it.status === 'PAS_ENCORE'"
                  [class.bg-success]="it.status === 'TRANSFERE'">
              {{ it.status === 'TRANSFERE' ? 'Transférée' : 'Pas encore' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- État vide -->
  <ng-template #empty>
    <div style="background:#B3E5FC; color:#01579B; padding:2rem; border-radius:.75rem; text-align:center; margin-bottom:1.5rem;">
      <i class="bi bi-info-circle icon-md" style="display:block; margin:0 auto 1rem; font-size:2.5rem;"></i>
      <p style="margin:0;">Aucune récompense pour l’instant.</p>
    </div>
  </ng-template>
</div>